jQuery(document).ready(function($){function detectIE(){var e=window.navigator.userAgent,s=e.indexOf("MSIE ");if(s>0)return!0;var i=e.indexOf("Trident/");return i>0?!0:!1}function ieFix(e){$(e).find("#fca_qc_back_container").css("backface-visibility","visible"),$(e).find("#fca_qc_back_container").css("transform","none"),$(e).find("#fca_qc_back_container").hide()}function loadQuizzes(){$(".fca_qc_quiz").each(function(index){var thisId=get_quiz_id(this);quizzes[thisId]=eval("quizData_"+thisId)}),$.each(quizzes,function(e){for(var s=0;s<quizzes[e].questions.length;s++)""==quizzes[e].questions[s].answer&&quizzes[e].questions.splice(s)})}function preloadImages(){var e=[];$.each(quizzes,function(s){for(var i=0;i<quizzes[s].quiz_results.length;i++)e[i]=new Image,e[i].src=quizzes[s].quiz_results[i].img})}function get_quiz_id(e){return $(e).attr("id").replace(/\D+/g,"")}function showQuestion(e){if(e.currentQuestion<e.questionCount){$(e.selector).find(".fca_qc_question_count").html(e.currentQuestion+1+"/"+e.questionCount),$(e.selector).find(".fca_qc_answer_div").removeClass("quizprep-wrong-answer");var s=e.questions[e.currentQuestion].question,i=e.questions[e.currentQuestion].answer,n=e.questions[e.currentQuestion].img,c=e.questions[e.currentQuestion].wrong1,t=e.questions[e.currentQuestion].wrong2,r=e.questions[e.currentQuestion].wrong3,_=[i,c,t,r],o=shuffleArray(_);$(e.selector).find("#fca_qc_answer_container").find(".fca_qc_quiz_question_img").attr("src",n),$(e.selector).find("#fca_qc_back_container").find(".fca_qc_quiz_question_img").attr("src",n),$(e.selector).find("#fca_qc_question").html(s),$(e.selector).find("#fca_qc_question_back").html(s),$(e.selector).find(".fca_qc_answer_div").show();for(var a=0;a<o.length;a++)""==o[a]?$(e.selector).find(".fca_qc_answer_span").eq(a).parent().hide():$(e.selector).find(".fca_qc_answer_span").eq(a).html(o[a]);e.currentQuestion=e.currentQuestion+1,e.currentAnswer=i,$(e.selector).find("#fca_qc_answer_container").waitForImages(function(){scale_flip_box_question(e.selector)})}else endTest(e)}function scale_flip_box_question(e){var s=$(e).find("#fca_qc_question").outerHeight(!0);s+=$(e).find(".fca_qc_quiz_question_img").outerHeight(!0),$(e).find(".fca_qc_answer_div").each(function(){$(this).is(":visible")&&(s+=$(this).outerHeight(!0))}),400>s&&(s=400),$(e).find(".fca_qc_quiz_div, #fca_qc_answer_container, #fca_qc_back_container").height(s)}function scale_flip_box_back(e){var s=0;$(e).find("#fca_qc_back_container").children().each(function(){$(this).is(":visible")&&(s+=$(this).outerHeight(!0))}),s+=35,400>s&&(s=400),$(e).find(".fca_qc_quiz_div, #fca_qc_answer_container, #fca_qc_back_container").height(s)}function set_result(e){for(var s="undefined",i=0;"undefined"==s;)e.quiz_results[i].min<=e.score&&e.quiz_results[i].max>=e.score?s=e.quiz_results[i]:i==e.quiz_results.length?s="error":i++;var n=scoreString.replace("{{SCORE_CORRECT}}",e.score);n=n.replace("{{SCORE_TOTAL}}",e.questionCount),$(e.selector).find(".fca_qc_score_text").html(n),$(e.selector).find(".fca_qc_score_title").html(s.title),$(e.selector).find(".fca_qc_score_img").attr("src",s.img),$(e.selector).find(".fca_qc_score_desc").html(s.desc)}function show_responses(e){for(var s=0;s<e.questions.length;s++)do_answer_response_div(e.questions[s],e.responses[s],s+1,e.selector,e.your_answer_string,e.correct_answer_string);$(e.selector).find(".fca_qc_result_container").show()}function do_answer_response_div(e,s,i,n,c,t){var r="";r+=e.answer==s?"<div class='fca_eoi_question_response_item correct-answer'>":"<div class='fca_eoi_question_response_item wrong-answer'>",r+="<h3 class='fca_eoi_question_response_question'>"+i+". "+e.question+"</h3>",r+="<img class='fca_qc_quiz_question_img' src='"+e.img+"'>",r+="<p class='fca_eoi_question_response_response'><span class='fca_qc_bold'>"+c+" </span>"+s+"</p>",r+="<p class='fca_eoi_question_response_correct_answer'><span class='fca_qc_bold'>"+t+" </span>"+e.answer+"</p>",r+="</div>",$(n).find(".fca_qc_insert_response_above").before(r)}function endTest(e){$(e.selector).find(".fca_qc_quiz_footer").hide(),$(e.selector).find(".fca_qc_quiz_div").hide(),$(e.selector).find(".fca_qc_score_container").show(),set_result(e),e.hideAnswers&&show_responses(e)}function shuffleArray(e){for(var s=e.length-1;s>0;s--){var i=Math.floor(Math.random()*(s+1)),n=e[s];e[s]=e[i],e[i]=n}return e}var usingIE=detectIE(),scoreString=$(".fca_qc_score_text").first().html(),quizzes={};loadQuizzes(),preloadImages(),$(".fca_qc_start_button").click(function(){var e=quizzes[get_quiz_id(this.parentNode)];e.selector=this.parentNode,usingIE?ieFix(e.selector):"",e.currentQuestion=0,e.score=0,e.responses=[],e.questionCount=e.questions.length,e.hideAnswers="on"==e.quiz_settings.hide_answers?!0:!1,$(this).siblings(".fca_qc_quiz_title").hide(),$(this).siblings(".fca_qc_quiz_description").hide(),$(this).siblings(".fca_qc_quiz_description_img").hide(),$(this).hide(),$(this).siblings(".fca_qc_quiz_div").show(),$(this).siblings(".fca_qc_quiz_footer").show(),$(this).siblings(".flip-container").show(),$(this).siblings(".fca_qc_question_count").html("1/"+e.questionCount),showQuestion(e),e.selector.scrollIntoView(!0)}),$(".fca_qc_next_question").click(function(){var e=quizzes[get_quiz_id($(this).closest(".fca_qc_quiz"))];usingIE?($(e.selector).find("#fca_qc_answer_container").show(),$(e.selector).find("#fca_qc_back_container").hide()):$(e.selector).find(".fca_qc_quiz_div").removeClass("flip"),showQuestion(e)}),$(".fca_qc_answer_div").click(function(){var e=quizzes[get_quiz_id($(this).closest(".fca_qc_quiz"))];$(this).blur(),e.responses.push($(this).children(".fca_qc_answer_span").html()),e.hideAnswers?$(this).children(".fca_qc_answer_span").html()==e.currentAnswer?(e.score=e.score+1,showQuestion(e)):showQuestion(e):($(e.selector).find("#fca_qc_your_answer").html($(this).children(".fca_qc_answer_span").html()),$(e.selector).find("#fca_qc_correct_answer").html(e.currentAnswer),usingIE?($(e.selector).find("#fca_qc_answer_container").hide(),$(e.selector).find("#fca_qc_back_container").show()):$(e.selector).find(".fca_qc_quiz_div").addClass("flip"),$(e.selector).find("#fca_qc_back_container").removeClass("correct-answer"),$(e.selector).find("#fca_qc_back_container").removeClass("wrong-answer"),$(this).children(".fca_qc_answer_span").html()==e.currentAnswer?(e.score=e.score+1,$(e.selector).find("#fca_qc_back_container").addClass("correct-answer"),$(e.selector).find("#fca_qc_question_right_or_wrong").html(e.correct_string),$(e.selector).find("#fca_qc_correct_answer_p").hide()):($(e.selector).find("#fca_qc_back_container").addClass("wrong-answer"),$(e.selector).find("#fca_qc_question_right_or_wrong").html(e.wrong_string),$(e.selector).find("#fca_qc_correct_answer_p").show()),scale_flip_box_back(e.selector))})});