jQuery(document).ready(function(t){function i(){t(".fca_qc_sortable_results, .fca_qc_sortable_questions").sortable({revert:!0,start:function(){d=!0},stop:function(){d=!1}}),t(".fca_qc_sortable_results").unbind("sortupdate"),t(".fca_qc_sortable_results").on("sortupdate",function(){s(),l(!0)}),t(".fca_qc_sortable_questions").unbind("sortupdate"),t(".fca_qc_sortable_questions").on("sortupdate",function(){u(),l(!0)})}function n(){t(".fca_qc_answer_toggle").unbind("click"),t(".fca_qc_answer_toggle").click(function(){t(this).parent().next().val(""),t(this).parent().next().toggle();const i="("+adminData.remove_string+")";t(this).html(t(this).html()===i?"("+adminData.show_string+")":"("+adminData.remove_string+")")})}function c(){t(".fca_qc_question_item, .fca_qc_result_item").unbind("click"),t(".fca_qc_question_item").click(function(){0==d&&t(this).find(".fca_qc_question_input_div").toggle("fast")}),t(".fca_qc_result_item").click(function(){0==d&&t(this).find(".fca_qc_result_input_div").toggle("fast")}),t(".fca_qc_question_input_div, .fca_qc_result_input_div").bind("click",function(t){t.stopPropagation()})}function _(){t(".fca_qc_question_text").unbind("keyup"),t(".fca_qc_question_text").keyup(function(){t(this).closest(".fca_qc_question_input_div").prev().children(".fca_qc_quiz_heading_text").html(t(this).val())})}function e(){t(".fca_qc_quiz_result").unbind("keyup"),t(".fca_qc_quiz_result").keyup(function(){t(this).closest(".fca_qc_result_input_div").siblings(".fca_qc_result_label").children(".fca_qc_result_score_title").html(t(this).val())})}function a(){t(".fca_qc_delete_icon").unbind("click"),t(".fca_qc_delete_icon").click(function(){confirm(adminData.sureWarning_string)&&(t(this).closest(".fca_qc_deletable_item").remove(),s(),l(!0))})}function s(){const i=t(".fca_qc_question_item").length,n=t(".fca_qc_result_item").length,c=parseInt((i+1)/n);var _=(i+1)%n,e=0;t(".fca_qc_result_item").each(function(){if(i>=e){var n=e,a=0;n==i?a=n:(a=n+(c-1),0!=_&&(a+=1,_-=1),a>i&&(a=i)),e=a+1,t(this).children(".fca_qc_result_min").attr("value",n),t(this).children(".fca_qc_result_max").attr("value",a),t(this).children(".fca_qc_result_label").children(".fca_qc_result_score_value").html(a==n?n+" "+adminData.points_string+": ":n+"-"+a+" "+adminData.points_string+": ")}else t(this).children(".fca_qc_result_label").children(".fca_qc_result_score_value").html(adminData.unused_string)})}function u(){var i=1;t(".fca_qc_question_item").each(function(){t(this).children(".fca_qc_question_label").children(".fca_qc_quiz_heading_question_number").html(adminData.question_string+" "+i+": "),i+=1})}function o(){t(".fca_qc_quiz_image_upload_btn, .fca_qc_image").unbind("click"),t(".fca_qc_quiz_image_upload_btn, .fca_qc_image").click(function(i){i.preventDefault(),$this=t(this),t(this).hasClass("fca_qc_quiz_image_upload_btn")&&($this=t(this.parentNode).siblings(".fca_qc_image"));var n=wp.media({title:adminData.selectImage_string,multiple:!1}).open().on("select",function(){var t=n.state().get("selection").first(),i=t.toJSON().url;$this.siblings(".fca_qc_image_input").attr("value",i),$this.attr("src",i),$this.siblings(".fca_qc_image_hover_controls").children(".fca_qc_quiz_image_revert_btn").show(),$this.siblings(".fca_qc_image_hover_controls").children(".fca_qc_quiz_image_upload_btn").show()})}),t(".fca_qc_quiz_image_revert_btn").unbind("click"),t(".fca_qc_quiz_image_revert_btn").click(function(){t(this.parentNode).siblings(".fca_qc_image_input").attr("value",""),t(this.parentNode).siblings(".fca_qc_image").attr("src",adminData.image_placeholder_url),t(this).hide(),t(this).siblings(".fca_qc_quiz_image_upload_btn").hide()})}function l(t){window.onbeforeunload=t?r:null}function r(){return adminData.navigationWarning_string}t(".onoffswitch-inner").each(function(){t(this).attr("data-content-on",adminData.on_string),t(this).attr("data-content-off",adminData.off_string)}),t(".fca_qc_question_input_div").length>1&&t(".fca_qc_question_input_div").hide(),t(".fca_qc_result_input_div").length>1&&t(".fca_qc_result_input_div").hide();const f='<button type="button" class="button-primary" id="fca_qc_submit_button">'+adminData.save_string+"</buttton>",q='<button type="button" class="button-secondary" id="fca_qc_preview_button">'+adminData.preview_string+"</buttton>";t("#normal-sortables").append(f),t("#fca_qc_submit_button").click(function(){l(!1),t("#publish").click()}),t("#normal-sortables").append(q),t("#fca_qc_preview_button").click(function(){t("#post-preview").click()}),t("#submitdiv").hide(),t("#wpbody-content").show();var d=!1;i(),t("#fca_qc_add_question_btn").click(function(){var e=t(".fca_qc_question_item").length;e+=1;var r=adminData.questionDiv.replace("{{QUESTION_NUMBER}}",e);r=r.replace("{{QUESTION_NUMBER}}:",e+":"),t(".fca_qc_sortable_questions").append(r),i(),_(),c(),n(),a(),o(),s(),u(),l(!0)}),t("#fca_qc_add_result_btn").click(function(){var n=t(".fca_qc_result_item").length;n+=1;var _=adminData.resultDiv.replace("{{RESULT_NUMBER}}",n);_=_.replace("{{RESULT_NUMBER}}<",n+"<"),t(".fca_qc_sortable_results").append(_),i(),c(),a(),o(),e(),s(),l(!0)}),n(),t("#fca_qc_shortcode_input").click(function(){this.select()}),t(".fca_qc_admin_label").click(function(){t(this).next().focus()}),c(),_(),e(),a(),s(),o(),t("input, textarea").bind("change",function(){l(!0)})});